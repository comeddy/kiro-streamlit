# 프로젝트 구조 및 조직

## 파일 구성

### 루트 레벨 파일
- **`app.py`**: 모든 기능을 포함하는 메인 Streamlit 애플리케이션
- **`requirements.txt`**: Python 패키지 의존성
- **`README.md`**: 한국어로 작성된 종합적인 프로젝트 문서

### 디렉토리 구조
```
stock-investment-strands-agent/
├── app.py                 # 단일 파일 Streamlit 앱
├── requirements.txt       # 의존성
├── README.md             # 한국어 문서
├── .venv/                # 가상환경 (gitignored)
├── __pycache__/          # Python 캐시 (gitignored)
├── .git/                 # Git 저장소
└── .kiro/                # Kiro IDE 설정
    ├── settings/         # IDE 설정
    ├── steering/         # 프로젝트 가이드 규칙
    └── specs/            # 프로젝트 명세서
        └── stock-investment-strands-agent/
            ├── requirements.md
            ├── design.md
            └── tasks.md
```

## app.py 내부 코드 구성

### 임포트 섹션
- 표준 라이브러리 임포트 먼저
- 서드파티 패키지 (streamlit, pandas, yfinance, plotly)
- 로컬 임포트 (있는 경우)

### 설정 및 초기화
- Streamlit 페이지 설정
- 세션 상태 초기화
- 전역 상수 및 설정

### 핵심 함수 (기능별 구성)
1. **AI 응답 시스템**
   - `get_investment_advice()`: 규칙 기반 채팅 응답
   - 패턴 매칭 및 한국어 응답 템플릿

2. **포트폴리오 분석**
   - `calculate_risk_score()`: 사용자 위험도 평가
   - `generate_portfolio_advice()`: 개인화된 추천

3. **주식 데이터 함수**
   - 실시간 데이터를 위한 yfinance 통합
   - 잘못된 티커에 대한 오류 처리

4. **UI 컴포넌트**
   - 메뉴 기반 네비게이션 (채팅, 주식 조회, 포트폴리오 분석 등)
   - Streamlit 위젯 및 레이아웃

### 메인 애플리케이션 플로우
- 사이드바 네비게이션
- 메뉴 선택에 따른 조건부 렌더링
- 면책 조항이 포함된 푸터

## 명명 규칙

### 함수
- 설명적인 동사가 포함된 영어 이름: `get_investment_advice()`, `calculate_risk_score()`
- Snake_case 형식
- 가능한 경우 명확한 매개변수 및 반환 타입 힌트

### 변수
- 내부 로직용 영어 이름: `user_input`, `stock_data`, `portfolio`
- UI 텍스트용 한국어 문자열: 문자열 리터럴로 저장
- 데이터 타입과 목적을 나타내는 설명적인 이름

### UI 요소
- 사용자 대면 요소에 대한 한국어 라벨
- 시각적 계층을 위한 일관된 이모지 사용
- 적절한 마크다운 형식의 명확한 섹션 헤더

## 데이터 플로우 패턴

### 세션 상태 관리
- `st.session_state.chat_history`: 지속적인 채팅 대화
- 성능을 위한 최소한의 상태 저장
- 앱 시작 시 명확한 상태 초기화

### 사용자 입력 처리
1. 입력 검증 및 새니타이징
2. 키워드 매칭을 통한 의도 분류
3. 적절한 형식의 응답 생성
4. 상태 업데이트 및 UI 새로고침

### 외부 API 통합
- 오류 처리가 포함된 주식 데이터용 yfinance
- API 실패에 대한 우아한 폴백
- 한국어로 된 사용자 친화적인 오류 메시지

## 기능 모듈 (단일 파일 내)

### 1. 채팅 (Chat Interface)
- 규칙 기반 대화 시스템
- 자주 묻는 질문을 위한 FAQ 버튼
- 채팅 기록 표시 및 관리

### 2. 주식 조회 (Stock Lookup)
- 실시간 주식 데이터 조회
- Plotly를 사용한 인터랙티브 차트
- 초보자 친화적인 분석 코멘트

### 3. 포트폴리오 분석 (Portfolio Analysis)
- 사용자 프로필 수집
- 위험도 평가 알고리즘
- 개인화된 투자 추천

### 4. 투자 교육 (Investment Education)
- 구조화된 학습 콘텐츠
- 점진적 난이도 수준
- 인터랙티브 교육 자료

### 5. 시장 동향 (Market Trends)
- 시장 개요 및 분석
- 경제 뉴스 해석
- 트렌드 시각화 (향후 구현)

## 개발 가이드라인

### 새 기능 추가
1. 기존 핵심 함수 뒤에 함수 정의 추가
2. 사이드바의 메인 네비게이션 메뉴 업데이트
3. 메인 콘텐츠 영역에 새로운 조건부 렌더링 블록 추가
4. 새 기능으로 README.md 업데이트

### 기존 기능 수정
1. 세션 상태와의 하위 호환성 유지
2. 한국어 언어 일관성 보존
3. 관련 문서 업데이트
4. 오류 처리 시나리오 테스트

### 코드 품질 표준
- 함수를 집중적이고 단일 목적으로 유지
- 더 나은 코드 명확성을 위한 타입 힌트 사용
- 복잡한 함수에 대한 독스트링 포함
- 일관된 들여쓰기 및 형식 유지